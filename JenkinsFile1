node('dev') {
  // Working enviornment specific variables
  def wsDirPath = this.env.getProperty('WORKSPACE')
  // Tools specific variables
  def maven_home = tool(name:"Maven")
  
  try {
    stage("dummy: gathering info") {
      echo "user details: "
      sh "who am i"
      echo "Workspace directory path :"
      echo "${wsDirPath}"
      echo "Maven version : "
      sh "${maven_home}/bin/mvn -version"
      echo "Java version : "
      sh "java -version"
    }
    stage("building the application") {
      echo "cloning the source code from github"
      checkout scmGit(branches: [[name: 'branch1']],
                      userRemoteConfigs: [[credentialsId: 'a27afd60-ba78-46fe-8603-8566ba9151e6', url: 'git@github.com:project-simlple/Demo.git']]
                      )
      echo "listing workspace directory : "
      sh "ls -alh ${wsDirPath}"
    }
    stage("cleaning workspace") {
      cleanWs(cleanWhenSuccess: true,
              cleanWhenAborted: false,
              cleanWhenFailure: false,
              cleanWhenNotBuilt: false
              )  
    }
    
  } catch(Exception e) {
    
  } finally {
    
  }
  
}
